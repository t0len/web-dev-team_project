<div class="book-list-container">
    <div class="search-bar">
      <mat-form-field appearance="outline">
        <mat-label>Search books</mat-label>
        <input matInput [(ngModel)]="searchQuery" (keyup.enter)="onSearch()">
        <button mat-icon-button matSuffix (click)="onSearch()">
          <mat-icon>search</mat-icon>
        </button>
      </mat-form-field>
  
      <button *ngIf="authService.isAuthenticated()" 
              mat-raised-button 
              color="primary"
              routerLink="/add-book">
        Add New Book
      </button>
    </div>
  
    @if (isLoading) {
      <div class="loading-spinner">
        <mat-spinner diameter="50"></mat-spinner>
      </div>
    } @else {
      <div class="book-grid">
        @for (book of books; track book.id) {
          <mat-card class="book-card">
            <img mat-card-image [src]="book.coverImage" alt="Cover of {{book.title}}">
            <mat-card-header>
              <mat-card-title>{{ book.title }}</mat-card-title>
              <mat-card-subtitle>{{ book.author }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-actions>
              <button mat-button [routerLink]="['/books', book.id]">Details</button>
              <button mat-button (click)="loadBooks()">Download</button>
            </mat-card-actions>
          </mat-card>
        } @empty {
          <p class="no-books">No books found</p>
        }
      </div>
    }
  </div>
